generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Users {
  id          Int      @id @default(autoincrement())
  email       String   @unique
  username    String?
  password    String
  isAdmin     Boolean  @default(false)
  description String?  @default("No About Me")
  servers     Server[]
}

model Session {
  id         String   @id @default(cuid())
  session_id String   @unique
  data       String
  expires    DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model Server {
  id        Int      @id @default(autoincrement())
  UUID      String   @unique @default(uuid())
  name      String
  createdAt DateTime @default(now())
  Ports     String
  Suspended Boolean  @default(false)
  ownerId   Int
  nodeId    Int
  node      Node     @relation(fields: [nodeId], references: [id])
  owner     Users    @relation(fields: [ownerId], references: [id])
}

model Node {
  id        Int      @id @default(autoincrement())
  name      String
  ram       Int      @default(0)
  cpu       Int      @default(0)
  disk      Int      @default(0)
  address   String   @default("127.0.0.1")
  port      Int      @default(3001)
  key       String
  apiKey    String   @default("")
  createdAt DateTime @default(now())
  servers   Server[]
}
